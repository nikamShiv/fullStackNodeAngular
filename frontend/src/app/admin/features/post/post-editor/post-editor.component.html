<form class="p-10" (submit)="submit()" [formGroup]="form">
    <mat-card>
        <mat-card-header>
            <mat-card-title>
                <h1 class="text-left">{{form.value.id?"Update":"Create New"}} Post</h1>
            </mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <mat-form-field appearance="outline">
                <mat-label>Title</mat-label>
                <input formControlName="title" matInput placeholder="Title">
                <mat-error>Please
                    <strong>enter</strong> a valid title
                </mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label>Select Category</mat-label>
                <mat-select formControlName="categoryId" matInput placeholder="Select Category">
                    @for(category of categories;track category.id){
                        <mat-option [value]="category.id">{{category.name}}</mat-option>
                    }
                </mat-select>
                <mat-error>Please
                    <strong>select</strong> a valid category
                </mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label>Content</mat-label>
                <textarea formControlName="content" matInput placeholder="Content" rows="5"></textarea>
                <mat-error>Please
                    <strong>enter</strong> a valid content
                </mat-error>
            </mat-form-field>
            <mat-chip-set aria-label="Fish selection">
             @for(tag of selectedTags; track tag.id){
                <mat-chip>{{tag.name}} <button matChipRemove (click)="removeTag(tag.id)">
                    <mat-icon>cancel</mat-icon>
                  </button></mat-chip>
              
             }
            </mat-chip-set>

              <button mat-raised-button type="button" (click)="showTagsDropdown=!showTagsDropdown" class="my-9 mb-5" >
                <mat-icon  >{{showTagsDropdown?"expand_less":"expand_more"}}</mat-icon>
               Add More Tags
              </button>
              @if(showTagsDropdown){
              <mat-form-field appearance="outline" class="mt-5">
                <mat-label>Select Tags</mat-label>
                <mat-select matInput placeholder="Select Tags" (selectionChange)="addTag($event.value)">
                    @for(tag of tagsData;track tag.id){
                        <mat-option [value]="tag.id">{{tag.name}}</mat-option>
                    }
                </mat-select>
                <mat-error>Please
                    <strong>select</strong> a valid category
                </mat-error>
            </mat-form-field>}
        </mat-card-content>
        <mat-card-actions>
            <button type="submit" [disabled]="!form.valid" mat-raised-button
                color="primary">{{form.value.id?"Update":"Create"}}</button>
        </mat-card-actions>

    </mat-card>
</form>